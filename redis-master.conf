# 기본 설정
port 6379
appendonly yes
save 900 1

# pub/sub 최적화 (핵심!)
client-output-buffer-limit pubsub 256mb 128mb 60

# 메모리 관리
maxmemory 2gb
maxmemory-policy noeviction

# 연결 관리
maxclients 10000
timeout 0
tcp-keepalive 300
tcp-backlog 511

# Sentinel을 위한 설정
replica-announce-ip redis-master

# 로그
loglevel notice
slowlog-log-slower-than 10000
slowlog-max-len 128

# 네트워크
bind 0.0.0.0
protected-mode no