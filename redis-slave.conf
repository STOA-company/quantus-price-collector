port 6379
appendonly yes
save 900 1

# pub/sub 최적화 (핵심!)
client-output-buffer-limit pubsub 256mb 128mb 60

# 메모리 관리
maxmemory 2gb
maxmemory-policy noeviction

# 연결 관리
maxclients 10000
timeout 0
tcp-keepalive 300
tcp-backlog 511

# Slave Node 설정
replica-announce-ip redis-slave
replica-announce-port 6379

# Master Node 연결 설정
replicaof redis-master 6379

# 복제 설정
repl-ping-replica-period 10
repl-timeout 60

# 슬레이브 전용 설정
replica-read-only yes
replica-serve-stale-data yes
replica-priority 100

# 로그
loglevel notice
slowlog-log-slower-than 10000
slowlog-max-len 128

# 네트워크
bind 0.0.0.0
protected-mode no